{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\BE MAJOR PROJECT Krutik\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// App.js\nimport React, { useState, useRef, useEffect } from \"react\";\nimport io from \"socket.io-client\";\n\n// === Constants ===\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIGNALING_URL = \"http://localhost:5000\"; // server.js\nconst CV_WS_URL = \"ws://localhost:7001/ws\"; // main.py detection broadcast\nconst CV_FRAME_URL = \"ws://localhost:7001/ws_frames\"; // main.py frame input\n\n// detection decryption key (base64) printed by main.py at startup\nconst DETECTION_KEY_B64 = \"<PASTE_KEY_FROM_MAINPY_HERE>\";\n\n// === AES-GCM helpers ===\nasync function importAesKey(b64) {\n  const raw = Uint8Array.from(atob(b64), c => c.charCodeAt(0));\n  return await window.crypto.subtle.importKey(\"raw\", raw, \"AES-GCM\", false, [\"encrypt\", \"decrypt\"]);\n}\nasync function decryptAes(key, ct_b64, iv_b64) {\n  try {\n    const ct = Uint8Array.from(atob(ct_b64), c => c.charCodeAt(0));\n    const iv = Uint8Array.from(atob(iv_b64), c => c.charCodeAt(0));\n    const raw = await window.crypto.subtle.decrypt({\n      name: \"AES-GCM\",\n      iv\n    }, key, ct);\n    return JSON.parse(new TextDecoder().decode(raw));\n  } catch (e) {\n    console.error(\"decrypt error\", e);\n    return null;\n  }\n}\nexport default function App() {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [connected, setConnected] = useState(false);\n  const [socket, setSocket] = useState(null);\n  const [detections, setDetections] = useState([]);\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [chatLog, setChatLog] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const wsDetRef = useRef(null);\n  const wsFrameRef = useRef(null);\n  const detectionKeyRef = useRef(null);\n  const socketRef = useRef(null);\n\n  // === Setup camera and frame sender ===\n  useEffect(() => {\n    async function init() {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true\n      });\n      if (videoRef.current) videoRef.current.srcObject = stream;\n\n      // connect to detection broadcast WS\n      wsDetRef.current = new WebSocket(CV_WS_URL);\n      wsDetRef.current.onmessage = async ev => {\n        const msg = JSON.parse(ev.data);\n        if (msg.type === \"detection_broadcast_enc\" && msg.data) {\n          const dec = await decryptAes(detectionKeyRef.current, msg.data.ciphertext_b64, msg.data.iv_b64);\n          if (dec && dec.detections) setDetections(dec.detections);\n        }\n      };\n\n      // connect to frames WS (send frames continuously)\n      wsFrameRef.current = new WebSocket(CV_FRAME_URL);\n      wsFrameRef.current.onopen = () => {\n        console.log(\"Frame WS connected\");\n        const sendFrame = () => {\n          if (videoRef.current && wsFrameRef.current && wsFrameRef.current.readyState === 1) {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = videoRef.current.videoWidth;\n            canvas.height = videoRef.current.videoHeight;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(videoRef.current, 0, 0);\n            const dataUrl = canvas.toDataURL(\"image/jpeg\", 0.5);\n            wsFrameRef.current.send(dataUrl);\n          }\n          requestAnimationFrame(sendFrame);\n        };\n        requestAnimationFrame(sendFrame);\n      };\n    }\n    importAesKey(DETECTION_KEY_B64).then(k => detectionKeyRef.current = k);\n    init();\n  }, []);\n\n  // === Draw bounding boxes ===\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (!videoRef.current) return;\n    const draw = () => {\n      if (!videoRef.current.videoWidth) {\n        requestAnimationFrame(draw);\n        return;\n      }\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n      ctx.drawImage(videoRef.current, 0, 0);\n      detections.forEach(det => {\n        const [x1, y1, x2, y2] = det.bbox;\n        ctx.strokeStyle = det.object_id === selectedObject ? \"lime\" : \"red\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n        ctx.fillStyle = \"yellow\";\n        ctx.font = \"14px Arial\";\n        ctx.fillText(det.class, x1 + 4, y1 + 14);\n\n        // render chat messages above object\n        chatLog.filter(m => m.object_id === det.object_id).slice(-3) // last 3 messages\n        .forEach((m, idx) => {\n          ctx.fillStyle = \"rgba(0,0,0,0.6)\";\n          ctx.fillRect(x1, y1 - 40 - idx * 20, x2 - x1, 20);\n          ctx.fillStyle = \"white\";\n          ctx.fillText(`${m.sender}: ${m.text}`, x1 + 4, y1 - 26 - idx * 20);\n        });\n      });\n      requestAnimationFrame(draw);\n    };\n    requestAnimationFrame(draw);\n  }, [detections, selectedObject, chatLog]);\n\n  // === Setup socket.io for chat ===\n  const connectSocket = () => {\n    const s = io(SIGNALING_URL);\n    socketRef.current = s;\n    setSocket(s);\n    s.on(\"connect\", () => {\n      s.emit(\"register\", {\n        username\n      });\n      setConnected(true);\n    });\n    s.on(\"message\", msg => {\n      setChatLog(prev => [...prev, msg]);\n    });\n  };\n  const sendMessage = () => {\n    if (!selectedObject) {\n      alert(\"Select an object first!\");\n      return;\n    }\n    if (socketRef.current) {\n      const msg = {\n        sender: username,\n        receiver: \"all\",\n        // for demo, broadcast to all\n        object_id: selectedObject,\n        text: message,\n        ts: Date.now()\n      };\n      socketRef.current.emit(\"message\", msg);\n      setMessage(\"\");\n    }\n  };\n\n  // === Object click detection ===\n  const handleCanvasClick = e => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    for (const det of detections) {\n      const [x1, y1, x2, y2] = det.bbox;\n      if (x >= x1 && x <= x2 && y >= y1 && y <= y2) {\n        setSelectedObject(det.object_id);\n        return;\n      }\n    }\n    setSelectedObject(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-900 text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex items-center justify-center relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        className: \"hidden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        onClick: handleCanvasClick,\n        className: \"w-full h-full\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), !connected && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 flex flex-col items-center justify-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"p-2 text-black rounded\",\n          placeholder: \"Enter username\",\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 px-4 py-2 bg-blue-600 rounded\",\n          onClick: connectSocket,\n          children: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-0 right-0 w-72 h-full bg-gray-900 border-l border-gray-700 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 font-bold border-b border-gray-700\",\n        children: \"Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-2 space-y-2\",\n        children: chatLog.map((m, idx) => {\n          const isMe = m.sender === username;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `p-2 rounded ${isMe ? \"bg-blue-600 ml-auto text-right\" : \"bg-gray-700\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs opacity-75\",\n              children: [isMe ? \"Me\" : m.sender, \" \\u2192 \", m.receiver]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: m.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 border-t border-gray-700 flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"flex-1 bg-gray-800 p-2 rounded text-sm outline-none\",\n          placeholder: \"Type message...\",\n          value: message,\n          onChange: e => setMessage(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ml-2 bg-green-600 px-3 py-1 rounded text-sm\",\n          onClick: sendMessage,\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"bep0T7qefyaYRX+lXp+GXpz8LWg=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useRef","useEffect","io","jsxDEV","_jsxDEV","SIGNALING_URL","CV_WS_URL","CV_FRAME_URL","DETECTION_KEY_B64","importAesKey","b64","raw","Uint8Array","from","atob","c","charCodeAt","window","crypto","subtle","importKey","decryptAes","key","ct_b64","iv_b64","ct","iv","decrypt","name","JSON","parse","TextDecoder","decode","e","console","error","App","_s","username","setUsername","connected","setConnected","socket","setSocket","detections","setDetections","selectedObject","setSelectedObject","chatLog","setChatLog","message","setMessage","videoRef","canvasRef","wsDetRef","wsFrameRef","detectionKeyRef","socketRef","init","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","WebSocket","onmessage","ev","msg","data","type","dec","ciphertext_b64","onopen","log","sendFrame","readyState","canvas","document","createElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","dataUrl","toDataURL","send","requestAnimationFrame","then","k","draw","forEach","det","x1","y1","x2","y2","bbox","strokeStyle","object_id","lineWidth","strokeRect","fillStyle","font","fillText","class","filter","m","slice","idx","fillRect","sender","text","connectSocket","s","on","emit","prev","sendMessage","alert","receiver","ts","Date","now","handleCanvasClick","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","className","children","ref","autoPlay","muted","playsInline","fileName","_jsxFileName","lineNumber","columnNumber","onClick","placeholder","value","onChange","target","map","isMe","_c","$RefreshReg$"],"sources":["D:/projects/BE MAJOR PROJECT Krutik/client/src/App.js"],"sourcesContent":["// App.js\nimport React, { useState, useRef, useEffect } from \"react\";\nimport io from \"socket.io-client\";\n\n// === Constants ===\nconst SIGNALING_URL = \"http://localhost:5000\";   // server.js\nconst CV_WS_URL = \"ws://localhost:7001/ws\";      // main.py detection broadcast\nconst CV_FRAME_URL = \"ws://localhost:7001/ws_frames\"; // main.py frame input\n\n// detection decryption key (base64) printed by main.py at startup\nconst DETECTION_KEY_B64 = \"<PASTE_KEY_FROM_MAINPY_HERE>\";\n\n// === AES-GCM helpers ===\nasync function importAesKey(b64) {\n  const raw = Uint8Array.from(atob(b64), (c) => c.charCodeAt(0));\n  return await window.crypto.subtle.importKey(\"raw\", raw, \"AES-GCM\", false, [\n    \"encrypt\",\n    \"decrypt\",\n  ]);\n}\n\nasync function decryptAes(key, ct_b64, iv_b64) {\n  try {\n    const ct = Uint8Array.from(atob(ct_b64), (c) => c.charCodeAt(0));\n    const iv = Uint8Array.from(atob(iv_b64), (c) => c.charCodeAt(0));\n    const raw = await window.crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, ct);\n    return JSON.parse(new TextDecoder().decode(raw));\n  } catch (e) {\n    console.error(\"decrypt error\", e);\n    return null;\n  }\n}\n\nexport default function App() {\n  const [username, setUsername] = useState(\"\");\n  const [connected, setConnected] = useState(false);\n  const [socket, setSocket] = useState(null);\n\n  const [detections, setDetections] = useState([]);\n  const [selectedObject, setSelectedObject] = useState(null);\n\n  const [chatLog, setChatLog] = useState([]);\n  const [message, setMessage] = useState(\"\");\n\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const wsDetRef = useRef(null);\n  const wsFrameRef = useRef(null);\n  const detectionKeyRef = useRef(null);\n  const socketRef = useRef(null);\n\n  // === Setup camera and frame sender ===\n  useEffect(() => {\n    async function init() {\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n      if (videoRef.current) videoRef.current.srcObject = stream;\n\n      // connect to detection broadcast WS\n      wsDetRef.current = new WebSocket(CV_WS_URL);\n      wsDetRef.current.onmessage = async (ev) => {\n        const msg = JSON.parse(ev.data);\n        if (msg.type === \"detection_broadcast_enc\" && msg.data) {\n          const dec = await decryptAes(\n            detectionKeyRef.current,\n            msg.data.ciphertext_b64,\n            msg.data.iv_b64\n          );\n          if (dec && dec.detections) setDetections(dec.detections);\n        }\n      };\n\n      // connect to frames WS (send frames continuously)\n      wsFrameRef.current = new WebSocket(CV_FRAME_URL);\n      wsFrameRef.current.onopen = () => {\n        console.log(\"Frame WS connected\");\n        const sendFrame = () => {\n          if (\n            videoRef.current &&\n            wsFrameRef.current &&\n            wsFrameRef.current.readyState === 1\n          ) {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = videoRef.current.videoWidth;\n            canvas.height = videoRef.current.videoHeight;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(videoRef.current, 0, 0);\n            const dataUrl = canvas.toDataURL(\"image/jpeg\", 0.5);\n            wsFrameRef.current.send(dataUrl);\n          }\n          requestAnimationFrame(sendFrame);\n        };\n        requestAnimationFrame(sendFrame);\n      };\n    }\n    importAesKey(DETECTION_KEY_B64).then((k) => (detectionKeyRef.current = k));\n    init();\n  }, []);\n\n  // === Draw bounding boxes ===\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    if (!videoRef.current) return;\n\n    const draw = () => {\n      if (!videoRef.current.videoWidth) {\n        requestAnimationFrame(draw);\n        return;\n      }\n      canvas.width = videoRef.current.videoWidth;\n      canvas.height = videoRef.current.videoHeight;\n\n      ctx.drawImage(videoRef.current, 0, 0);\n\n      detections.forEach((det) => {\n        const [x1, y1, x2, y2] = det.bbox;\n        ctx.strokeStyle = det.object_id === selectedObject ? \"lime\" : \"red\";\n        ctx.lineWidth = 2;\n        ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);\n\n        ctx.fillStyle = \"yellow\";\n        ctx.font = \"14px Arial\";\n        ctx.fillText(det.class, x1 + 4, y1 + 14);\n\n        // render chat messages above object\n        chatLog\n          .filter((m) => m.object_id === det.object_id)\n          .slice(-3) // last 3 messages\n          .forEach((m, idx) => {\n            ctx.fillStyle = \"rgba(0,0,0,0.6)\";\n            ctx.fillRect(x1, y1 - 40 - idx * 20, x2 - x1, 20);\n            ctx.fillStyle = \"white\";\n            ctx.fillText(`${m.sender}: ${m.text}`, x1 + 4, y1 - 26 - idx * 20);\n          });\n      });\n\n      requestAnimationFrame(draw);\n    };\n    requestAnimationFrame(draw);\n  }, [detections, selectedObject, chatLog]);\n\n  // === Setup socket.io for chat ===\n  const connectSocket = () => {\n    const s = io(SIGNALING_URL);\n    socketRef.current = s;\n    setSocket(s);\n    s.on(\"connect\", () => {\n      s.emit(\"register\", { username });\n      setConnected(true);\n    });\n    s.on(\"message\", (msg) => {\n      setChatLog((prev) => [...prev, msg]);\n    });\n  };\n\n  const sendMessage = () => {\n    if (!selectedObject) {\n      alert(\"Select an object first!\");\n      return;\n    }\n    if (socketRef.current) {\n      const msg = {\n        sender: username,\n        receiver: \"all\", // for demo, broadcast to all\n        object_id: selectedObject,\n        text: message,\n        ts: Date.now(),\n      };\n      socketRef.current.emit(\"message\", msg);\n      setMessage(\"\");\n    }\n  };\n\n  // === Object click detection ===\n  const handleCanvasClick = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    for (const det of detections) {\n      const [x1, y1, x2, y2] = det.bbox;\n      if (x >= x1 && x <= x2 && y >= y1 && y <= y2) {\n        setSelectedObject(det.object_id);\n        return;\n      }\n    }\n    setSelectedObject(null);\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gray-900 text-white\">\n      {/* Left: video canvas */}\n      <div className=\"flex-1 flex items-center justify-center relative\">\n        <video ref={videoRef} autoPlay muted playsInline className=\"hidden\" />\n        <canvas ref={canvasRef} onClick={handleCanvasClick} className=\"w-full h-full\" />\n        {!connected && (\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n            <input\n              className=\"p-2 text-black rounded\"\n              placeholder=\"Enter username\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n            <button\n              className=\"mt-2 px-4 py-2 bg-blue-600 rounded\"\n              onClick={connectSocket}\n            >\n              Join\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Right: chat sidebar */}\n      <div className=\"absolute top-0 right-0 w-72 h-full bg-gray-900 border-l border-gray-700 flex flex-col\">\n        <div className=\"p-2 font-bold border-b border-gray-700\">Chat</div>\n        <div className=\"flex-1 overflow-y-auto p-2 space-y-2\">\n          {chatLog.map((m, idx) => {\n            const isMe = m.sender === username;\n            return (\n              <div\n                key={idx}\n                className={`p-2 rounded ${\n                  isMe ? \"bg-blue-600 ml-auto text-right\" : \"bg-gray-700\"\n                }`}\n              >\n                <div className=\"text-xs opacity-75\">\n                  {isMe ? \"Me\" : m.sender} → {m.receiver}\n                </div>\n                <div>{m.text}</div>\n              </div>\n            );\n          })}\n        </div>\n        <div className=\"p-2 border-t border-gray-700 flex\">\n          <input\n            className=\"flex-1 bg-gray-800 p-2 rounded text-sm outline-none\"\n            placeholder=\"Type message...\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n          <button\n            className=\"ml-2 bg-green-600 px-3 py-1 rounded text-sm\"\n            onClick={sendMessage}\n          >\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}