{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\BE MAJOR PROJECT Krutik\\\\client\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n/* client/src/App.js */\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { SOCKET_URL, CV_API_URL } from \"./config\"; // ✅ import from your new config file\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SIO = io(SOCKET_URL); // ✅ use SOCKET_URL instead of localhost\n\n// helpers: base64 <-> arraybuffer\n_c = SIO;\nfunction b64ToArrayBuffer(b64) {\n  const binary = atob(b64);\n  const len = binary.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) bytes[i] = binary.charCodeAt(i);\n  return bytes.buffer;\n}\nfunction arrayBufferToB64(buf) {\n  const bytes = new Uint8Array(buf);\n  let bin = \"\";\n  for (let i = 0; i < bytes.byteLength; i++) bin += String.fromCharCode(bytes[i]);\n  return btoa(bin);\n}\n\n// ECDH (P-256) + AES-GCM helpers\nasync function generateECDHKeyPair() {\n  const kp = await window.crypto.subtle.generateKey({\n    name: \"ECDH\",\n    namedCurve: \"P-256\"\n  }, true, [\"deriveKey\"]);\n  const pubRaw = await window.crypto.subtle.exportKey(\"raw\", kp.publicKey);\n  const pubB64 = arrayBufferToB64(pubRaw);\n  return {\n    keyPair: kp,\n    publicKeyB64: pubB64\n  };\n}\nasync function importPeerPublicKey(rawB64) {\n  const raw = b64ToArrayBuffer(rawB64);\n  return window.crypto.subtle.importKey(\"raw\", raw, {\n    name: \"ECDH\",\n    namedCurve: \"P-256\"\n  }, true, []);\n}\nasync function deriveAESGCMKey(ownKP, peerRawB64) {\n  const peerKey = await importPeerPublicKey(peerRawB64);\n  const aesKey = await window.crypto.subtle.deriveKey({\n    name: \"ECDH\",\n    public: peerKey\n  }, ownKP.privateKey, {\n    name: \"AES-GCM\",\n    length: 256\n  }, false, [\"encrypt\", \"decrypt\"]);\n  return aesKey;\n}\nasync function encryptAesGcm(key, plaintext) {\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n  const enc = new TextEncoder().encode(plaintext);\n  const ct = await window.crypto.subtle.encrypt({\n    name: \"AES-GCM\",\n    iv\n  }, key, enc);\n  return {\n    ciphertext: arrayBufferToB64(ct),\n    iv: arrayBufferToB64(iv.buffer)\n  };\n}\nasync function decryptAesGcm(key, ciphertextB64, ivB64) {\n  const ivBuf = b64ToArrayBuffer(ivB64);\n  const ctBuf = b64ToArrayBuffer(ciphertextB64);\n  const plainBuf = await window.crypto.subtle.decrypt({\n    name: \"AES-GCM\",\n    iv: new Uint8Array(ivBuf)\n  }, key, ctBuf);\n  return new TextDecoder().decode(plainBuf);\n}\n\n// ---------- AES helpers for detection decryption ----------\nasync function importDetectionKeyFromB64(b64) {\n  try {\n    const raw = b64ToArrayBuffer(b64);\n    const key = await window.crypto.subtle.importKey(\"raw\", raw, \"AES-GCM\", false, [\"decrypt\"]);\n    return key;\n  } catch (e) {\n    console.error(\"importDetectionKeyFromB64 failed\", e);\n    return null;\n  }\n}\n\n// ---------- App ----------\nexport default function App() {\n  _s();\n  const videoRef = useRef(null);\n  const overlayRef = useRef(null);\n  const framesWSRef = useRef(null);\n  const detectWSRef = useRef(null);\n  const [username, setUsername] = useState(\"\");\n  const [peer, setPeer] = useState(\"\");\n  const [connected, setConnected] = useState(false);\n  const [detections, setDetections] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const localKeyPairRef = useRef(null);\n  const localPubB64Ref = useRef(null);\n  const [peerPubMap, setPeerPubMap] = useState({});\n  const derivedKeysRef = useRef({});\n  const detectionKeyRef = useRef(null);\n  const [chats, setChats] = useState({});\n  const [input, setInput] = useState(\"\");\n  const FRAME_INTERVAL_MS = 500;\n\n  // Init local ECDH key pair\n  useEffect(() => {\n    (async () => {\n      const {\n        keyPair,\n        publicKeyB64\n      } = await generateECDHKeyPair();\n      localKeyPairRef.current = keyPair;\n      localPubB64Ref.current = publicKeyB64;\n    })();\n    (async () => {\n      try {\n        const res = await fetch(\"http://localhost:7001/static/detection_key.txt\");\n        const key = await res.text();\n        detectionKeyRef.current = await importDetectionKeyFromB64(key.trim());\n        console.log(\"Detection AES key imported automatically.\");\n      } catch (e) {\n        console.warn(\"Failed to fetch detection key\", e);\n      }\n    })();\n  }, []);\n\n  // Socket.IO handlers\n  useEffect(() => {\n    SIO.on(\"connect\", () => setConnected(true));\n    SIO.on(\"disconnect\", () => setConnected(false));\n    SIO.on(\"message\", async msg => {\n      const {\n        sender,\n        object_id,\n        text_enc,\n        ts\n      } = msg;\n      const aesKey = derivedKeysRef.current[sender];\n      if (aesKey && text_enc) {\n        try {\n          const plaintext = await decryptAesGcm(aesKey, text_enc.ciphertext, text_enc.iv);\n          setChats(prev => {\n            const arr = prev[object_id] ? [...prev[object_id]] : [];\n            arr.push({\n              sender,\n              plaintext,\n              ts: ts || Date.now()\n            });\n            return {\n              ...prev,\n              [object_id]: arr\n            };\n          });\n        } catch {\n          setChats(prev => {\n            const arr = prev[object_id] ? [...prev[object_id]] : [];\n            arr.push({\n              sender,\n              plaintext: \"[decryption_failed]\",\n              ts: ts || Date.now()\n            });\n            return {\n              ...prev,\n              [object_id]: arr\n            };\n          });\n        }\n      } else {\n        setChats(prev => {\n          const arr = prev[object_id] ? [...prev[object_id]] : [];\n          arr.push({\n            sender,\n            plaintext: \"[encrypted]\",\n            ts: ts || Date.now()\n          });\n          return {\n            ...prev,\n            [object_id]: arr\n          };\n        });\n      }\n    });\n    SIO.on(\"pubkey_response\", async ({\n      peer,\n      publicKeyB64\n    }) => {\n      if (!publicKeyB64) {\n        alert(`Peer \"${peer}\" is not registered or has not published a key yet.`);\n        return;\n      }\n      setPeerPubMap(prev => ({\n        ...prev,\n        [peer]: publicKeyB64\n      }));\n      if (localKeyPairRef.current) {\n        try {\n          const aes = await deriveAESGCMKey(localKeyPairRef.current, publicKeyB64);\n          derivedKeysRef.current[peer] = aes;\n          SIO.emit(\"send_pubkey_to\", {\n            from: username,\n            to: peer,\n            publicKeyB64: localPubB64Ref.current\n          });\n          alert(`Shared key established with ${peer}`);\n        } catch (e) {\n          console.warn(\"derive failed\", e);\n        }\n      }\n    });\n    SIO.on(\"peer_pubkey\", async ({\n      from,\n      publicKeyB64\n    }) => {\n      setPeerPubMap(prev => ({\n        ...prev,\n        [from]: publicKeyB64\n      }));\n      if (localKeyPairRef.current) {\n        try {\n          const aes = await deriveAESGCMKey(localKeyPairRef.current, publicKeyB64);\n          derivedKeysRef.current[from] = aes;\n          console.log(\"Derived AES for\", from);\n        } catch (e) {\n          console.warn(\"derive failed\", e);\n        }\n      }\n    });\n    return () => {\n      SIO.off(\"connect\");\n      SIO.off(\"disconnect\");\n      SIO.off(\"message\");\n      SIO.off(\"pubkey_response\");\n      SIO.off(\"peer_pubkey\");\n    };\n  }, []);\n  async function handleRegister() {\n    if (!username) return alert(\"Type a username first\");\n    if (!localPubB64Ref.current) {\n      const {\n        keyPair,\n        publicKeyB64\n      } = await generateECDHKeyPair();\n      localKeyPairRef.current = keyPair;\n      localPubB64Ref.current = publicKeyB64;\n    }\n    SIO.emit(\"register\", {\n      username,\n      publicKeyB64: localPubB64Ref.current\n    });\n    alert(`Registered as ${username}`);\n  }\n  async function establishSharedKeyWithPeer() {\n    if (!peer) return alert(\"Set peer username\");\n    SIO.emit(\"get_pubkey\", {\n      requester: username,\n      peer\n    });\n  }\n\n  // Detection WS\n  useEffect(() => {\n    const DETECTION_WS = CV_API_URL.replace(/^http/, \"ws\") + \"/ws\";\n    const ws = new WebSocket(DETECTION_WS);\n    detectWSRef.current = ws;\n    ws.onmessage = async evt => {\n      try {\n        const data = JSON.parse(evt.data);\n        if (data.type === \"detection_broadcast_enc\" && data.data && detectionKeyRef.current) {\n          const {\n            ciphertext_b64,\n            iv_b64\n          } = data.data;\n          const plainBuf = await window.crypto.subtle.decrypt({\n            name: \"AES-GCM\",\n            iv: new Uint8Array(b64ToArrayBuffer(iv_b64))\n          }, detectionKeyRef.current, b64ToArrayBuffer(ciphertext_b64));\n          const obj = JSON.parse(new TextDecoder().decode(plainBuf));\n          setDetections(obj.detections || []);\n        } else if (data.type === \"detection_broadcast\" && data.detections) {\n          setDetections(data.detections || []);\n        }\n      } catch (e) {\n        console.warn(\"Invalid detection data\", e);\n      }\n    };\n    return () => ws.close();\n  }, []);\n\n  // Frames WS\n  useEffect(() => {\n    let ws = null,\n      interval = null,\n      mounted = true;\n    const startFramesWS = async () => {\n      try {\n        const FRAMES_WS = CV_API_URL.replace(/^http/, \"ws\") + \"/ws_frames\";\n        const ws = new WebSocket(FRAMES_WS);\n        framesWSRef.current = ws;\n        const stream = await navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          await videoRef.current.play();\n        }\n        interval = setInterval(() => {\n          if (!mounted || !videoRef.current || ws.readyState !== WebSocket.OPEN) return;\n          const canvas = document.createElement(\"canvas\");\n          canvas.width = 320;\n          canvas.height = 240;\n          const ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(videoRef.current, 0, 0, 320, 240);\n          ws.send(canvas.toDataURL(\"image/jpeg\", 0.7));\n        }, FRAME_INTERVAL_MS);\n      } catch (e) {\n        console.error(\"frames WS setup failed\", e);\n      }\n    };\n    startFramesWS();\n    return () => {\n      mounted = false;\n      if (interval) clearInterval(interval);\n      if (framesWSRef.current) framesWSRef.current.close();\n      if (videoRef.current && videoRef.current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(t => t.stop());\n      }\n    };\n  }, []);\n\n  // Overlay rendering (boxes + messages above selected object)\n  useEffect(() => {\n    const canvas = overlayRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) return;\n    const ctx = canvas.getContext(\"2d\");\n    let raf;\n    const render = () => {\n      const w = canvas.width = video.clientWidth || 640;\n      const h = canvas.height = video.clientHeight || 480;\n      ctx.clearRect(0, 0, w, h);\n\n      // Scale from 320x240 to video size\n      const sx = w / 320,\n        sy = h / 240;\n      for (const d of detections) {\n        const [x1, y1, x2, y2] = d.bbox;\n        const left = x1 * sx,\n          top = y1 * sy,\n          width = (x2 - x1) * sx,\n          height = (y2 - y1) * sy;\n        ctx.lineWidth = selected === d.object_id ? 3 : 2;\n        ctx.strokeStyle = selected === d.object_id ? \"#34d399\" : \"#f59e0b\";\n        ctx.strokeRect(left, top, width, height);\n        ctx.fillStyle = ctx.strokeStyle;\n        ctx.font = \"14px Inter, Arial\";\n        ctx.fillText(`${d.class} ${(d.conf * 100).toFixed(0)}%`, left + 6, top + 18);\n        if (selected === d.object_id) {\n          const msgs = chats[selected] || [];\n          const last = msgs.slice(-2);\n          last.forEach((m, idx) => {\n            const text = m.plaintext || \"[encrypted]\";\n            const bx = left,\n              by = top - 20 * (last.length - idx);\n            const wText = Math.min(300, ctx.measureText(text).width + 12);\n            ctx.fillStyle = \"rgba(2,6,23,0.9)\";\n            ctx.fillRect(bx, by - 14, wText, 18);\n            ctx.fillStyle = \"#e6eef8\";\n            ctx.fillText(text, bx + 6, by);\n          });\n        }\n      }\n      raf = requestAnimationFrame(render);\n    };\n    raf = requestAnimationFrame(render);\n    return () => cancelAnimationFrame(raf);\n  }, [detections, chats, selected]);\n\n  // Click handler for selecting objects\n  function handleVideoClick(e) {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const w = e.target.clientWidth || 640;\n    const h = e.target.clientHeight || 480;\n    const sx = 320 / w,\n      sy = 240 / h;\n    let picked = null;\n    for (const d of detections) {\n      const [x1, y1, x2, y2] = d.bbox;\n      // Map click to 320x240 space\n      const rx = x * sx,\n        ry = y * sy;\n      if (rx >= x1 && rx <= x2 && ry >= y1 && ry <= y2) {\n        picked = d.object_id;\n        break;\n      }\n    }\n    setSelected(picked);\n  }\n  async function sendMessage() {\n    if (!username || !peer) return alert(\"set username and peer\");\n    if (!selected) return alert(\"select an object first\");\n    if (!input) return;\n    const aesKey = derivedKeysRef.current[peer];\n    if (!aesKey) return alert(\"no shared key with peer yet\");\n    try {\n      const enc = await encryptAesGcm(aesKey, input);\n      SIO.emit(\"message\", {\n        sender: username,\n        receiver: peer,\n        object_id: selected,\n        text_enc: enc,\n        ts: Date.now()\n      });\n      setChats(prev => {\n        const arr = prev[selected] ? [...prev[selected]] : [];\n        arr.push({\n          sender: username,\n          plaintext: input,\n          ts: Date.now()\n        });\n        return {\n          ...prev,\n          [selected]: arr\n        };\n      });\n      setInput(\"\");\n    } catch (e) {\n      console.error(\"send failed\", e);\n      alert(\"Failed to send message\");\n    }\n  }\n\n  // ---------- UI ----------\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontFamily: \"'Inter', 'Poppins', Arial, sans-serif\",\n      background: \"linear-gradient(135deg, #18181b 0%, #23272f 100%)\",\n      minHeight: \"100vh\",\n      color: \"#f4f4f5\",\n      padding: 24,\n      letterSpacing: 0.1\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"link\", {\n      href: \"https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap\",\n      rel: \"stylesheet\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1300,\n        margin: \"0 auto 32px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        padding: \"0 8px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0,\n          fontWeight: 700,\n          fontSize: 28,\n          color: \"#fff\",\n          letterSpacing: 1,\n          textShadow: \"0 2px 16px #000a\"\n        },\n        children: \"Real Time Messaging System Using AI/ML\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: connected ? \"#22d3ee\" : \"#f87171\",\n          fontWeight: 600,\n          fontSize: 16,\n          letterSpacing: 1,\n          background: connected ? \"rgba(34,211,238,0.10)\" : \"rgba(248,113,113,0.10)\",\n          padding: \"6px 18px\",\n          borderRadius: 16,\n          boxShadow: \"0 2px 12px 0 rgba(34,211,238,0.08)\"\n        },\n        children: connected ? \"Online\" : \"Offline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"grid\",\n        gridTemplateColumns: \"340px 1fr 370px\",\n        gap: 24,\n        alignItems: \"flex-start\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"rgba(36,37,46,0.98)\",\n          backdropFilter: \"blur(12px)\",\n          borderRadius: 18,\n          boxShadow: \"0 4px 32px 0 rgba(34,211,238,0.10)\",\n          padding: 24,\n          border: \"1.5px solid rgba(63,63,70,0.32)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 700,\n            marginBottom: 14,\n            fontSize: 20,\n            color: \"#22d3ee\"\n          },\n          children: \"Session\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: \"#a1a1aa\"\n          },\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"100%\",\n            padding: 12,\n            marginTop: 8,\n            borderRadius: 12,\n            border: \"1.5px solid #22d3ee\",\n            background: \"#23272f\",\n            color: \"#22d3ee\",\n            fontWeight: 600,\n            fontSize: 16,\n            outline: \"none\",\n            marginBottom: 12,\n            transition: \"border 0.2s\"\n          },\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          placeholder: \"your name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: \"#a1a1aa\"\n          },\n          children: \"Peer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            width: \"100%\",\n            padding: 12,\n            marginTop: 8,\n            borderRadius: 12,\n            border: \"1.5px solid #818cf8\",\n            background: \"#23272f\",\n            color: \"#818cf8\",\n            fontWeight: 600,\n            fontSize: 16,\n            outline: \"none\",\n            marginBottom: 16,\n            transition: \"border 0.2s\"\n          },\n          value: peer,\n          onChange: e => setPeer(e.target.value),\n          placeholder: \"peer username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleRegister,\n            disabled: !username || !localPubB64Ref.current,\n            style: {\n              padding: \"10px 18px\",\n              borderRadius: 12,\n              background: \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\",\n              border: \"none\",\n              color: \"#fff\",\n              fontWeight: 700,\n              fontSize: 15,\n              cursor: \"pointer\",\n              boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.10)\",\n              letterSpacing: 1,\n              transition: \"background 0.2s\"\n            },\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: establishSharedKeyWithPeer,\n            disabled: !peer || !localPubB64Ref.current,\n            style: {\n              padding: \"10px 18px\",\n              borderRadius: 12,\n              background: \"linear-gradient(90deg, #818cf8 60%, #22d3ee 100%)\",\n              border: \"none\",\n              color: \"#fff\",\n              fontWeight: 700,\n              fontSize: 15,\n              cursor: \"pointer\",\n              boxShadow: \"0 2px 8px 0 rgba(129,140,248,0.10)\",\n              letterSpacing: 1,\n              transition: \"background 0.2s\"\n            },\n            children: \"Establish Key\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 18\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: \"#a1a1aa\",\n            marginBottom: 8\n          },\n          children: \"Selected object\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: 12,\n            background: \"rgba(34,211,238,0.10)\",\n            borderRadius: 12,\n            color: \"#22d3ee\",\n            fontWeight: 700,\n            fontSize: 18,\n            marginBottom: 8,\n            boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.08)\"\n          },\n          children: [selected || \"None\", /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 12,\n              color: \"#818cf8\",\n              marginTop: 4,\n              fontWeight: 500\n            },\n            children: [detections.length, \" objects in view\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 16\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: \"#a1a1aa\"\n          },\n          children: \"Encrypted Message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: input,\n          onChange: e => setInput(e.target.value),\n          placeholder: \"Type message...\",\n          rows: 5,\n          style: {\n            width: \"100%\",\n            marginTop: 10,\n            borderRadius: 12,\n            background: \"#23272f\",\n            color: \"#818cf8\",\n            border: \"1.5px solid #818cf8\",\n            padding: 12,\n            fontSize: 15,\n            fontWeight: 500,\n            outline: \"none\",\n            marginBottom: 10,\n            resize: \"vertical\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 10,\n            marginTop: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendMessage,\n            style: {\n              padding: \"10px 18px\",\n              borderRadius: 12,\n              background: \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\",\n              border: \"none\",\n              color: \"#fff\",\n              fontWeight: 700,\n              fontSize: 15,\n              cursor: \"pointer\",\n              boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.10)\",\n              letterSpacing: 1,\n              transition: \"background 0.2s\"\n            },\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setInput(\"\"),\n            style: {\n              padding: \"10px 18px\",\n              borderRadius: 12,\n              background: \"linear-gradient(90deg, #818cf8 60%, #22d3ee 100%)\",\n              border: \"none\",\n              color: \"#fff\",\n              fontWeight: 700,\n              fontSize: 15,\n              cursor: \"pointer\",\n              boxShadow: \"0 2px 8px 0 rgba(129,140,248,0.10)\",\n              letterSpacing: 1,\n              transition: \"background 0.2s\"\n            },\n            children: \"Clear\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 18\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 14,\n            color: \"#a1a1aa\"\n          },\n          children: \"Known peer public keys\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 10,\n            maxHeight: 160,\n            overflowY: \"auto\",\n            background: \"#23272f\",\n            padding: 10,\n            borderRadius: 12,\n            fontSize: 13,\n            color: \"#f4f4f5\",\n            boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.08)\"\n          },\n          children: [Object.keys(peerPubMap).length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#818cf8\"\n            },\n            children: \"No peer public keys yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 15\n          }, this), Object.entries(peerPubMap).map(([u, k]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700,\n                color: \"#818cf8\"\n              },\n              children: u\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 603,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: \"#a1a1aa\",\n                wordBreak: \"break-all\"\n              },\n              children: [k.slice(0, 60), k.length > 60 ? \"...\" : \"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 604,\n              columnNumber: 17\n            }, this)]\n          }, u, true, {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"rgba(36,37,46,0.98)\",\n          backdropFilter: \"blur(12px)\",\n          borderRadius: 18,\n          boxShadow: \"0 4px 32px 0 rgba(34,211,238,0.10)\",\n          padding: 24,\n          border: \"1.5px solid rgba(63,63,70,0.32)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 700,\n            marginBottom: 14,\n            fontSize: 20,\n            color: \"#22d3ee\"\n          },\n          children: \"Live Camera\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\",\n            position: \"relative\",\n            background: \"#18181b\",\n            borderRadius: 14,\n            overflow: \"hidden\",\n            boxShadow: \"0 2px 16px 0 rgba(34,211,238,0.10)\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"video\", {\n            ref: videoRef,\n            onClick: handleVideoClick,\n            style: {\n              width: \"100%\",\n              height: 480,\n              objectFit: \"cover\",\n              borderRadius: 14,\n              filter: \"brightness(1.08) saturate(1.1)\"\n            },\n            autoPlay: true,\n            muted: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: overlayRef,\n            style: {\n              position: \"absolute\",\n              left: 0,\n              top: 0,\n              pointerEvents: \"none\",\n              zIndex: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 648,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: 14,\n            display: \"flex\",\n            gap: 8\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: 15,\n              color: \"#a1a1aa\",\n              fontWeight: 500\n            },\n            children: \"Tip: click a bounding box to select object\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: \"rgba(36,37,46,0.98)\",\n          backdropFilter: \"blur(12px)\",\n          borderRadius: 18,\n          boxShadow: \"0 4px 32px 0 rgba(129,140,248,0.10)\",\n          padding: 24,\n          border: \"1.5px solid rgba(63,63,70,0.32)\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 700,\n            marginBottom: 14,\n            fontSize: 20,\n            color: \"#818cf8\"\n          },\n          children: \"Object Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 15,\n            color: \"#a1a1aa\",\n            marginBottom: 10,\n            fontWeight: 500\n          },\n          children: \"Messages for selected object\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            maxHeight: 480,\n            overflowY: \"auto\",\n            paddingRight: 8\n          },\n          children: selected && chats[selected] ? chats[selected].map((m, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: m.sender === username ? \"row-reverse\" : \"row\",\n              marginBottom: 14\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                maxWidth: \"80%\",\n                background: m.sender === username ? \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\" : \"#23272f\",\n                color: m.sender === username ? \"#fff\" : \"#818cf8\",\n                padding: 14,\n                borderRadius: 16,\n                fontWeight: 600,\n                fontSize: 15,\n                boxShadow: m.sender === username ? \"0 2px 8px 0 rgba(34,211,238,0.10)\" : \"0 2px 8px 0 rgba(129,140,248,0.10)\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 15,\n                  fontWeight: 700\n                },\n                children: m.plaintext || \"[encrypted]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: 11,\n                  color: \"#a1a1aa\",\n                  marginTop: 8\n                },\n                children: [m.sender, \" \\u2022 \", new Date(m.ts || Date.now()).toLocaleTimeString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 19\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: \"#818cf8\"\n            },\n            children: \"Select an object to see messages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 681,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 350,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"kw7Y5yuYTajYmGSWgpOpvU40eb0=\");\n_c2 = App;\nvar _c, _c2;\n$RefreshReg$(_c, \"SIO\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","io","SOCKET_URL","CV_API_URL","jsxDEV","_jsxDEV","SIO","_c","b64ToArrayBuffer","b64","binary","atob","len","length","bytes","Uint8Array","i","charCodeAt","buffer","arrayBufferToB64","buf","bin","byteLength","String","fromCharCode","btoa","generateECDHKeyPair","kp","window","crypto","subtle","generateKey","name","namedCurve","pubRaw","exportKey","publicKey","pubB64","keyPair","publicKeyB64","importPeerPublicKey","rawB64","raw","importKey","deriveAESGCMKey","ownKP","peerRawB64","peerKey","aesKey","deriveKey","public","privateKey","encryptAesGcm","key","plaintext","iv","getRandomValues","enc","TextEncoder","encode","ct","encrypt","ciphertext","decryptAesGcm","ciphertextB64","ivB64","ivBuf","ctBuf","plainBuf","decrypt","TextDecoder","decode","importDetectionKeyFromB64","e","console","error","App","_s","videoRef","overlayRef","framesWSRef","detectWSRef","username","setUsername","peer","setPeer","connected","setConnected","detections","setDetections","selected","setSelected","localKeyPairRef","localPubB64Ref","peerPubMap","setPeerPubMap","derivedKeysRef","detectionKeyRef","chats","setChats","input","setInput","FRAME_INTERVAL_MS","current","res","fetch","text","trim","log","warn","on","msg","sender","object_id","text_enc","ts","prev","arr","push","Date","now","alert","aes","emit","from","to","off","handleRegister","establishSharedKeyWithPeer","requester","DETECTION_WS","replace","ws","WebSocket","onmessage","evt","data","JSON","parse","type","ciphertext_b64","iv_b64","obj","close","interval","mounted","startFramesWS","FRAMES_WS","stream","navigator","mediaDevices","getUserMedia","video","srcObject","play","setInterval","readyState","OPEN","canvas","document","createElement","width","height","ctx","getContext","drawImage","send","toDataURL","clearInterval","getTracks","forEach","t","stop","raf","render","w","clientWidth","h","clientHeight","clearRect","sx","sy","d","x1","y1","x2","y2","bbox","left","top","lineWidth","strokeStyle","strokeRect","fillStyle","font","fillText","class","conf","toFixed","msgs","last","slice","m","idx","bx","by","wText","Math","min","measureText","fillRect","requestAnimationFrame","cancelAnimationFrame","handleVideoClick","rect","target","getBoundingClientRect","x","clientX","y","clientY","picked","rx","ry","sendMessage","receiver","style","fontFamily","background","minHeight","color","padding","letterSpacing","children","href","rel","fileName","_jsxFileName","lineNumber","columnNumber","maxWidth","margin","display","justifyContent","alignItems","fontWeight","fontSize","textShadow","borderRadius","boxShadow","gridTemplateColumns","gap","backdropFilter","border","marginBottom","marginTop","outline","transition","value","onChange","placeholder","onClick","disabled","cursor","rows","resize","maxHeight","overflowY","Object","keys","entries","map","u","k","wordBreak","position","overflow","ref","objectFit","filter","autoPlay","muted","pointerEvents","zIndex","paddingRight","flexDirection","toLocaleTimeString","_c2","$RefreshReg$"],"sources":["D:/projects/BE MAJOR PROJECT Krutik/client/src/App.js"],"sourcesContent":["/* client/src/App.js */\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { SOCKET_URL, CV_API_URL } from \"./config\"; // ✅ import from your new config file\n\nconst SIO = io(SOCKET_URL); // ✅ use SOCKET_URL instead of localhost\n\n// helpers: base64 <-> arraybuffer\nfunction b64ToArrayBuffer(b64) {\n  const binary = atob(b64);\n  const len = binary.length;\n  const bytes = new Uint8Array(len);\n  for (let i = 0; i < len; i++) bytes[i] = binary.charCodeAt(i);\n  return bytes.buffer;\n}\nfunction arrayBufferToB64(buf) {\n  const bytes = new Uint8Array(buf);\n  let bin = \"\";\n  for (let i = 0; i < bytes.byteLength; i++) bin += String.fromCharCode(bytes[i]);\n  return btoa(bin);\n}\n\n// ECDH (P-256) + AES-GCM helpers\nasync function generateECDHKeyPair() {\n  const kp = await window.crypto.subtle.generateKey(\n    { name: \"ECDH\", namedCurve: \"P-256\" },\n    true,\n    [\"deriveKey\"]\n  );\n  const pubRaw = await window.crypto.subtle.exportKey(\"raw\", kp.publicKey);\n  const pubB64 = arrayBufferToB64(pubRaw);\n  return { keyPair: kp, publicKeyB64: pubB64 };\n}\nasync function importPeerPublicKey(rawB64) {\n  const raw = b64ToArrayBuffer(rawB64);\n  return window.crypto.subtle.importKey(\"raw\", raw, { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\nasync function deriveAESGCMKey(ownKP, peerRawB64) {\n  const peerKey = await importPeerPublicKey(peerRawB64);\n  const aesKey = await window.crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: peerKey },\n    ownKP.privateKey,\n    { name: \"AES-GCM\", length: 256 },\n    false,\n    [\"encrypt\", \"decrypt\"]\n  );\n  return aesKey;\n}\nasync function encryptAesGcm(key, plaintext) {\n  const iv = window.crypto.getRandomValues(new Uint8Array(12));\n  const enc = new TextEncoder().encode(plaintext);\n  const ct = await window.crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, enc);\n  return { ciphertext: arrayBufferToB64(ct), iv: arrayBufferToB64(iv.buffer) };\n}\nasync function decryptAesGcm(key, ciphertextB64, ivB64) {\n  const ivBuf = b64ToArrayBuffer(ivB64);\n  const ctBuf = b64ToArrayBuffer(ciphertextB64);\n  const plainBuf = await window.crypto.subtle.decrypt({ name: \"AES-GCM\", iv: new Uint8Array(ivBuf) }, key, ctBuf);\n  return new TextDecoder().decode(plainBuf);\n}\n\n// ---------- AES helpers for detection decryption ----------\nasync function importDetectionKeyFromB64(b64) {\n  try {\n    const raw = b64ToArrayBuffer(b64);\n    const key = await window.crypto.subtle.importKey(\"raw\", raw, \"AES-GCM\", false, [\"decrypt\"]);\n    return key;\n  } catch (e) {\n    console.error(\"importDetectionKeyFromB64 failed\", e);\n    return null;\n  }\n}\n\n// ---------- App ----------\nexport default function App() {\n  const videoRef = useRef(null);\n  const overlayRef = useRef(null);\n  const framesWSRef = useRef(null);\n  const detectWSRef = useRef(null);\n\n  const [username, setUsername] = useState(\"\");\n  const [peer, setPeer] = useState(\"\");\n  const [connected, setConnected] = useState(false);\n\n  const [detections, setDetections] = useState([]);\n  const [selected, setSelected] = useState(null);\n\n  const localKeyPairRef = useRef(null);\n  const localPubB64Ref = useRef(null);\n  const [peerPubMap, setPeerPubMap] = useState({});\n  const derivedKeysRef = useRef({});\n\n  const detectionKeyRef = useRef(null);\n\n  const [chats, setChats] = useState({});\n  const [input, setInput] = useState(\"\");\n\n  const FRAME_INTERVAL_MS = 500;\n\n  // Init local ECDH key pair\n  useEffect(() => {\n    (async () => {\n      const { keyPair, publicKeyB64 } = await generateECDHKeyPair();\n      localKeyPairRef.current = keyPair;\n      localPubB64Ref.current = publicKeyB64;\n    })();\n\n    (async () => {\n      try {\n        const res = await fetch(\"http://localhost:7001/static/detection_key.txt\");\n        const key = await res.text();\n        detectionKeyRef.current = await importDetectionKeyFromB64(key.trim());\n        console.log(\"Detection AES key imported automatically.\");\n      } catch (e) {\n        console.warn(\"Failed to fetch detection key\", e);\n      }\n    })();\n  }, []);\n\n  // Socket.IO handlers\n  useEffect(() => {\n    SIO.on(\"connect\", () => setConnected(true));\n    SIO.on(\"disconnect\", () => setConnected(false));\n\n    SIO.on(\"message\", async (msg) => {\n      const { sender, object_id, text_enc, ts } = msg;\n      const aesKey = derivedKeysRef.current[sender];\n      if (aesKey && text_enc) {\n        try {\n          const plaintext = await decryptAesGcm(aesKey, text_enc.ciphertext, text_enc.iv);\n          setChats(prev => {\n            const arr = prev[object_id] ? [...prev[object_id]] : [];\n            arr.push({ sender, plaintext, ts: ts || Date.now() });\n            return { ...prev, [object_id]: arr };\n          });\n        } catch {\n          setChats(prev => {\n            const arr = prev[object_id] ? [...prev[object_id]] : [];\n            arr.push({ sender, plaintext: \"[decryption_failed]\", ts: ts || Date.now() });\n            return { ...prev, [object_id]: arr };\n          });\n        }\n      } else {\n        setChats(prev => {\n          const arr = prev[object_id] ? [...prev[object_id]] : [];\n          arr.push({ sender, plaintext: \"[encrypted]\", ts: ts || Date.now() });\n          return { ...prev, [object_id]: arr };\n        });\n      }\n    });\n\n    SIO.on(\"pubkey_response\", async ({ peer, publicKeyB64 }) => {\n      if (!publicKeyB64) {\n        alert(`Peer \"${peer}\" is not registered or has not published a key yet.`);\n        return;\n      }\n      setPeerPubMap(prev => ({ ...prev, [peer]: publicKeyB64 }));\n      if (localKeyPairRef.current) {\n        try {\n          const aes = await deriveAESGCMKey(localKeyPairRef.current, publicKeyB64);\n          derivedKeysRef.current[peer] = aes;\n          SIO.emit(\"send_pubkey_to\", { from: username, to: peer, publicKeyB64: localPubB64Ref.current });\n          alert(`Shared key established with ${peer}`);\n        } catch (e) {\n          console.warn(\"derive failed\", e);\n        }\n      }\n    });\n\n    SIO.on(\"peer_pubkey\", async ({ from, publicKeyB64 }) => {\n      setPeerPubMap(prev => ({ ...prev, [from]: publicKeyB64 }));\n      if (localKeyPairRef.current) {\n        try {\n          const aes = await deriveAESGCMKey(localKeyPairRef.current, publicKeyB64);\n          derivedKeysRef.current[from] = aes;\n          console.log(\"Derived AES for\", from);\n        } catch (e) {\n          console.warn(\"derive failed\", e);\n        }\n      }\n    });\n\n    return () => {\n      SIO.off(\"connect\"); SIO.off(\"disconnect\"); SIO.off(\"message\"); SIO.off(\"pubkey_response\"); SIO.off(\"peer_pubkey\");\n    };\n  }, []);\n\n  async function handleRegister() {\n    if (!username) return alert(\"Type a username first\");\n    if (!localPubB64Ref.current) {\n      const { keyPair, publicKeyB64 } = await generateECDHKeyPair();\n      localKeyPairRef.current = keyPair;\n      localPubB64Ref.current = publicKeyB64;\n    }\n    SIO.emit(\"register\", { username, publicKeyB64: localPubB64Ref.current });\n    alert(`Registered as ${username}`);\n  }\n\n  async function establishSharedKeyWithPeer() {\n    if (!peer) return alert(\"Set peer username\");\n    SIO.emit(\"get_pubkey\", { requester: username, peer });\n  }\n\n  // Detection WS\n  useEffect(() => {\n    const DETECTION_WS = CV_API_URL.replace(/^http/, \"ws\") + \"/ws\";\n    const ws = new WebSocket(DETECTION_WS);\n    detectWSRef.current = ws;\n    ws.onmessage = async (evt) => {\n      try {\n        const data = JSON.parse(evt.data);\n        if (data.type === \"detection_broadcast_enc\" && data.data && detectionKeyRef.current) {\n          const { ciphertext_b64, iv_b64 } = data.data;\n          const plainBuf = await window.crypto.subtle.decrypt(\n            { name: \"AES-GCM\", iv: new Uint8Array(b64ToArrayBuffer(iv_b64)) },\n            detectionKeyRef.current,\n            b64ToArrayBuffer(ciphertext_b64)\n          );\n          const obj = JSON.parse(new TextDecoder().decode(plainBuf));\n          setDetections(obj.detections || []);\n        } else if (data.type === \"detection_broadcast\" && data.detections) {\n          setDetections(data.detections || []);\n        }\n      } catch (e) {\n        console.warn(\"Invalid detection data\", e);\n      }\n    };\n    return () => ws.close();\n  }, []);\n\n  // Frames WS\n  useEffect(() => {\n    let ws = null, interval = null, mounted = true;\n    const startFramesWS = async () => {\n      try {\n        const FRAMES_WS = CV_API_URL.replace(/^http/, \"ws\") + \"/ws_frames\";\n        const ws = new WebSocket(FRAMES_WS);\n        framesWSRef.current = ws;\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          await videoRef.current.play();\n        }\n        interval = setInterval(() => {\n          if (!mounted || !videoRef.current || ws.readyState !== WebSocket.OPEN) return;\n          const canvas = document.createElement(\"canvas\");\n          canvas.width = 320; canvas.height = 240;\n          const ctx = canvas.getContext(\"2d\");\n          ctx.drawImage(videoRef.current, 0, 0, 320, 240);\n          ws.send(canvas.toDataURL(\"image/jpeg\", 0.7));\n        }, FRAME_INTERVAL_MS);\n      } catch (e) { console.error(\"frames WS setup failed\", e); }\n    };\n    startFramesWS();\n    return () => {\n      mounted = false;\n      if (interval) clearInterval(interval);\n      if (framesWSRef.current) framesWSRef.current.close();\n      if (videoRef.current && videoRef.current.srcObject) {\n        videoRef.current.srcObject.getTracks().forEach(t => t.stop());\n      }\n    };\n  }, []);\n\n  // Overlay rendering (boxes + messages above selected object)\n  useEffect(() => {\n    const canvas = overlayRef.current;\n    const video = videoRef.current;\n    if (!canvas || !video) return;\n    const ctx = canvas.getContext(\"2d\");\n    let raf;\n    const render = () => {\n      const w = canvas.width = video.clientWidth || 640;\n      const h = canvas.height = video.clientHeight || 480;\n      ctx.clearRect(0,0,w,h);\n\n      // Scale from 320x240 to video size\n      const sx = w / 320, sy = h / 240;\n\n      for (const d of detections) {\n        const [x1,y1,x2,y2] = d.bbox;\n        const left = x1*sx, top = y1*sy, width = (x2-x1)*sx, height = (y2-y1)*sy;\n        ctx.lineWidth = selected===d.object_id?3:2;\n        ctx.strokeStyle = selected===d.object_id?\"#34d399\":\"#f59e0b\";\n        ctx.strokeRect(left,top,width,height);\n        ctx.fillStyle=ctx.strokeStyle;\n        ctx.font=\"14px Inter, Arial\";\n        ctx.fillText(`${d.class} ${(d.conf*100).toFixed(0)}%`, left+6, top+18);\n\n        if(selected===d.object_id){\n          const msgs = chats[selected]||[];\n          const last = msgs.slice(-2);\n          last.forEach((m, idx)=>{\n            const text = m.plaintext || \"[encrypted]\";\n            const bx = left, by = top-20*(last.length-idx);\n            const wText = Math.min(300, ctx.measureText(text).width + 12);\n            ctx.fillStyle = \"rgba(2,6,23,0.9)\";\n            ctx.fillRect(bx, by-14, wText, 18);\n            ctx.fillStyle=\"#e6eef8\";\n            ctx.fillText(text, bx+6, by);\n          });\n        }\n      }\n\n      raf = requestAnimationFrame(render);\n    };\n    raf = requestAnimationFrame(render);\n    return ()=>cancelAnimationFrame(raf);\n  }, [detections, chats, selected]);\n\n  // Click handler for selecting objects\n  function handleVideoClick(e){\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const w = e.target.clientWidth || 640;\n    const h = e.target.clientHeight || 480;\n    const sx = 320 / w, sy = 240 / h;\n    let picked = null;\n    for(const d of detections){\n      const [x1,y1,x2,y2] = d.bbox;\n      // Map click to 320x240 space\n      const rx = x * sx, ry = y * sy;\n      if(rx>=x1 && rx<=x2 && ry>=y1 && ry<=y2){ picked=d.object_id; break; }\n    }\n    setSelected(picked);\n  }\n\n  async function sendMessage(){\n    if(!username||!peer) return alert(\"set username and peer\");\n    if(!selected) return alert(\"select an object first\");\n    if(!input) return;\n    const aesKey = derivedKeysRef.current[peer];\n    if(!aesKey) return alert(\"no shared key with peer yet\");\n    try{\n      const enc = await encryptAesGcm(aesKey, input);\n      SIO.emit(\"message\", { sender: username, receiver: peer, object_id: selected, text_enc: enc, ts:Date.now() });\n      setChats(prev=>{\n        const arr = prev[selected]? [...prev[selected]]:[];\n        arr.push({ sender:username, plaintext:input, ts:Date.now() });\n        return {...prev, [selected]:arr};\n      });\n      setInput(\"\");\n    } catch(e){ console.error(\"send failed\", e); alert(\"Failed to send message\"); }\n  }\n\n  // ---------- UI ----------\n  return (\n    <div\n      style={{\n        fontFamily: \"'Inter', 'Poppins', Arial, sans-serif\",\n        background: \"linear-gradient(135deg, #18181b 0%, #23272f 100%)\",\n        minHeight: \"100vh\",\n        color: \"#f4f4f5\",\n        padding: 24,\n        letterSpacing: 0.1,\n      }}\n    >\n      <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap\" rel=\"stylesheet\" />\n      <div\n        style={{\n          maxWidth: 1300,\n          margin: \"0 auto 32px\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          padding: \"0 8px\",\n        }}\n      >\n        <h2\n          style={{\n            margin: 0,\n            fontWeight: 700,\n            fontSize: 28,\n            color: \"#fff\",\n            letterSpacing: 1,\n            textShadow: \"0 2px 16px #000a\",\n          }}\n        >\n          Real Time Messaging System Using AI/ML\n        </h2>\n        <div\n          style={{\n            color: connected ? \"#22d3ee\" : \"#f87171\",\n            fontWeight: 600,\n            fontSize: 16,\n            letterSpacing: 1,\n            background: connected\n              ? \"rgba(34,211,238,0.10)\"\n              : \"rgba(248,113,113,0.10)\",\n            padding: \"6px 18px\",\n            borderRadius: 16,\n            boxShadow: \"0 2px 12px 0 rgba(34,211,238,0.08)\",\n          }}\n        >\n          {connected ? \"Online\" : \"Offline\"}\n        </div>\n      </div>\n\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: \"340px 1fr 370px\",\n          gap: 24,\n          alignItems: \"flex-start\",\n        }}\n      >\n        {/* Session / controls */}\n        <div\n          style={{\n            background: \"rgba(36,37,46,0.98)\",\n            backdropFilter: \"blur(12px)\",\n            borderRadius: 18,\n            boxShadow: \"0 4px 32px 0 rgba(34,211,238,0.10)\",\n            padding: 24,\n            border: \"1.5px solid rgba(63,63,70,0.32)\",\n          }}\n        >\n          <div style={{ fontWeight: 700, marginBottom: 14, fontSize: 20, color: \"#22d3ee\" }}>Session</div>\n          <div style={{ fontSize: 14, color: \"#a1a1aa\" }}>Username</div>\n          <input\n            style={{\n              width: \"100%\",\n              padding: 12,\n              marginTop: 8,\n              borderRadius: 12,\n              border: \"1.5px solid #22d3ee\",\n              background: \"#23272f\",\n              color: \"#22d3ee\",\n              fontWeight: 600,\n              fontSize: 16,\n              outline: \"none\",\n              marginBottom: 12,\n              transition: \"border 0.2s\",\n            }}\n            value={username}\n            onChange={e => setUsername(e.target.value)}\n            placeholder=\"your name\"\n          />\n          <div style={{ fontSize: 14, color: \"#a1a1aa\" }}>Peer</div>\n          <input\n            style={{\n              width: \"100%\",\n              padding: 12,\n              marginTop: 8,\n              borderRadius: 12,\n              border: \"1.5px solid #818cf8\",\n              background: \"#23272f\",\n              color: \"#818cf8\",\n              fontWeight: 600,\n              fontSize: 16,\n              outline: \"none\",\n              marginBottom: 16,\n              transition: \"border 0.2s\",\n            }}\n            value={peer}\n            onChange={e => setPeer(e.target.value)}\n            placeholder=\"peer username\"\n          />\n          <div style={{ display: \"flex\", gap: 10, marginTop: 8 }}>\n            <button\n              onClick={handleRegister}\n              disabled={!username || !localPubB64Ref.current}\n              style={{\n                padding: \"10px 18px\",\n                borderRadius: 12,\n                background: \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\",\n                border: \"none\",\n                color: \"#fff\",\n                fontWeight: 700,\n                fontSize: 15,\n                cursor: \"pointer\",\n                boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.10)\",\n                letterSpacing: 1,\n                transition: \"background 0.2s\",\n              }}\n            >\n              Register\n            </button>\n            <button\n              onClick={establishSharedKeyWithPeer}\n              disabled={!peer || !localPubB64Ref.current}\n              style={{\n                padding: \"10px 18px\",\n                borderRadius: 12,\n                background: \"linear-gradient(90deg, #818cf8 60%, #22d3ee 100%)\",\n                border: \"none\",\n                color: \"#fff\",\n                fontWeight: 700,\n                fontSize: 15,\n                cursor: \"pointer\",\n                boxShadow: \"0 2px 8px 0 rgba(129,140,248,0.10)\",\n                letterSpacing: 1,\n                transition: \"background 0.2s\",\n              }}\n            >\n              Establish Key\n            </button>\n          </div>\n\n          <div style={{ height: 18 }} />\n          <div style={{ fontSize: 14, color: \"#a1a1aa\", marginBottom: 8 }}>Selected object</div>\n          <div\n            style={{\n              padding: 12,\n              background: \"rgba(34,211,238,0.10)\",\n              borderRadius: 12,\n              color: \"#22d3ee\",\n              fontWeight: 700,\n              fontSize: 18,\n              marginBottom: 8,\n              boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.08)\",\n            }}\n          >\n            {selected || \"None\"}\n            <div style={{ fontSize: 12, color: \"#818cf8\", marginTop: 4, fontWeight: 500 }}>\n              {detections.length} objects in view\n            </div>\n          </div>\n\n          <div style={{ height: 16 }} />\n          <div style={{ fontSize: 14, color: \"#a1a1aa\" }}>Encrypted Message</div>\n          <textarea\n            value={input}\n            onChange={e => setInput(e.target.value)}\n            placeholder=\"Type message...\"\n            rows={5}\n            style={{\n              width: \"100%\",\n              marginTop: 10,\n              borderRadius: 12,\n              background: \"#23272f\",\n              color: \"#818cf8\",\n              border: \"1.5px solid #818cf8\",\n              padding: 12,\n              fontSize: 15,\n              fontWeight: 500,\n              outline: \"none\",\n              marginBottom: 10,\n              resize: \"vertical\",\n            }}\n          />\n          <div style={{ display: \"flex\", gap: 10, marginTop: 8 }}>\n            <button\n              onClick={sendMessage}\n              style={{\n                padding: \"10px 18px\",\n                borderRadius: 12,\n                background: \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\",\n                border: \"none\",\n                color: \"#fff\",\n                fontWeight: 700,\n                fontSize: 15,\n                cursor: \"pointer\",\n                boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.10)\",\n                letterSpacing: 1,\n                transition: \"background 0.2s\",\n              }}\n            >\n              Send\n            </button>\n            <button\n              onClick={() => setInput(\"\")}\n              style={{\n                padding: \"10px 18px\",\n                borderRadius: 12,\n                background: \"linear-gradient(90deg, #818cf8 60%, #22d3ee 100%)\",\n                border: \"none\",\n                color: \"#fff\",\n                fontWeight: 700,\n                fontSize: 15,\n                cursor: \"pointer\",\n                boxShadow: \"0 2px 8px 0 rgba(129,140,248,0.10)\",\n                letterSpacing: 1,\n                transition: \"background 0.2s\",\n              }}\n            >\n              Clear\n            </button>\n          </div>\n\n          <div style={{ height: 18 }} />\n          <div style={{ fontSize: 14, color: \"#a1a1aa\" }}>Known peer public keys</div>\n          <div\n            style={{\n              marginTop: 10,\n              maxHeight: 160,\n              overflowY: \"auto\",\n              background: \"#23272f\",\n              padding: 10,\n              borderRadius: 12,\n              fontSize: 13,\n              color: \"#f4f4f5\",\n              boxShadow: \"0 2px 8px 0 rgba(34,211,238,0.08)\",\n            }}\n          >\n            {Object.keys(peerPubMap).length === 0 && (\n              <div style={{ color: \"#818cf8\" }}>No peer public keys yet</div>\n            )}\n            {Object.entries(peerPubMap).map(([u, k]) => (\n              <div key={u} style={{ marginBottom: 10 }}>\n                <div style={{ fontWeight: 700, color: \"#818cf8\" }}>{u}</div>\n                <div style={{ fontSize: 12, color: \"#a1a1aa\", wordBreak: \"break-all\" }}>\n                  {k.slice(0, 60)}\n                  {k.length > 60 ? \"...\" : \"\"}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Video */}\n        <div\n          style={{\n            background: \"rgba(36,37,46,0.98)\",\n            backdropFilter: \"blur(12px)\",\n            borderRadius: 18,\n            boxShadow: \"0 4px 32px 0 rgba(34,211,238,0.10)\",\n            padding: 24,\n            border: \"1.5px solid rgba(63,63,70,0.32)\",\n          }}\n        >\n          <div style={{ fontWeight: 700, marginBottom: 14, fontSize: 20, color: \"#22d3ee\" }}>Live Camera</div>\n          <div\n            style={{\n              width: \"100%\",\n              position: \"relative\",\n              background: \"#18181b\",\n              borderRadius: 14,\n              overflow: \"hidden\",\n              boxShadow: \"0 2px 16px 0 rgba(34,211,238,0.10)\",\n            }}\n          >\n            <video\n              ref={videoRef}\n              onClick={handleVideoClick}\n              style={{\n                width: \"100%\",\n                height: 480,\n                objectFit: \"cover\",\n                borderRadius: 14,\n                filter: \"brightness(1.08) saturate(1.1)\",\n              }}\n              autoPlay\n              muted\n            />\n            <canvas\n              ref={overlayRef}\n              style={{\n                position: \"absolute\",\n                left: 0,\n                top: 0,\n                pointerEvents: \"none\",\n                zIndex: 2,\n              }}\n            />\n          </div>\n          <div style={{ marginTop: 14, display: \"flex\", gap: 8 }}>\n            <div style={{ fontSize: 15, color: \"#a1a1aa\", fontWeight: 500 }}>\n              Tip: click a bounding box to select object\n            </div>\n          </div>\n        </div>\n\n        {/* Chat Sidebar */}\n        <div\n          style={{\n            background: \"rgba(36,37,46,0.98)\",\n            backdropFilter: \"blur(12px)\",\n            borderRadius: 18,\n            boxShadow: \"0 4px 32px 0 rgba(129,140,248,0.10)\",\n            padding: 24,\n            border: \"1.5px solid rgba(63,63,70,0.32)\",\n          }}\n        >\n          <div style={{ fontWeight: 700, marginBottom: 14, fontSize: 20, color: \"#818cf8\" }}>Object Chat</div>\n          <div style={{ fontSize: 15, color: \"#a1a1aa\", marginBottom: 10, fontWeight: 500 }}>\n            Messages for selected object\n          </div>\n          <div style={{ maxHeight: 480, overflowY: \"auto\", paddingRight: 8 }}>\n            {selected && chats[selected] ? (\n              chats[selected].map((m, i) => (\n                <div\n                  key={i}\n                  style={{\n                    display: \"flex\",\n                    flexDirection: m.sender === username ? \"row-reverse\" : \"row\",\n                    marginBottom: 14,\n                  }}\n                >\n                  <div\n                    style={{\n                      maxWidth: \"80%\",\n                      background:\n                        m.sender === username\n                          ? \"linear-gradient(90deg, #22d3ee 60%, #818cf8 100%)\"\n                          : \"#23272f\",\n                      color: m.sender === username ? \"#fff\" : \"#818cf8\",\n                      padding: 14,\n                      borderRadius: 16,\n                      fontWeight: 600,\n                      fontSize: 15,\n                      boxShadow: m.sender === username\n                        ? \"0 2px 8px 0 rgba(34,211,238,0.10)\"\n                        : \"0 2px 8px 0 rgba(129,140,248,0.10)\",\n                    }}\n                  >\n                    <div style={{ fontSize: 15, fontWeight: 700 }}>\n                      {m.plaintext || \"[encrypted]\"}\n                    </div>\n                    <div style={{ fontSize: 11, color: \"#a1a1aa\", marginTop: 8 }}>\n                      {m.sender} • {new Date(m.ts || Date.now()).toLocaleTimeString()}\n                    </div>\n                  </div>\n                </div>\n              ))\n            ) : (\n              <div style={{ color: \"#818cf8\" }}>Select an object to see messages</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}